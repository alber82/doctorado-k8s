---
apiVersion: k6.io/v1alpha1
kind: TestRun
metadata:
  name: k6-sample
spec:
  parallelism: 1
  script:
    configMap:
      name: 'k6-test'
      file: 'nginx-test.js'
  runner:
    resources:
      requests:
        cpu: 2500m
        memory: 4096M
      limits:
        cpu: 3000m
        memory: 5000M
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: kubernetes.io/hostname
                operator: In
                values:
                  - master01